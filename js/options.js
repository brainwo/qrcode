const form=document.forms[0],options=Object.assign({ecl:"M",moduleSize:4,openUrl:"ask",autoclose:!0,whiteIcon:!1,sendUsageStats:!1},JSON.parse(localStorage.getItem("options")));Array.from(document.querySelectorAll("[data-i18n]")).forEach(e=>{e["OPTION"===e.tagName?"text":"value"in e&&"BUTTON"!==e.tagName?"value":"textContent"]=chrome.i18n.getMessage(e.dataset.i18n)}),document.title=`${chrome.i18n.getMessage("name")} ${chrome.i18n.getMessage("options")}`,browser.runtime.getBrowserInfo().then(e=>{"Fennec"===e.name&&Array.from(document.querySelectorAll("#section-general, #section-scan")).forEach(e=>e.remove())}),form.moduleSize.oninput=function(){form.moduleSizeText.value=`${form.moduleSize.value}px`,form.imageSize.value=`${35*form.moduleSize.value}px`},Object.keys(options).forEach(e=>{const o=form[e],t=["radio","checkbox"].includes(o.type),n=["number","range"].includes(o.type);o[t?"checked":"value"]=options[e],o.addEventListener("change",()=>{options[e]=t?o.checked:n?Number(o.value):o.value,localStorage.setItem("options",JSON.stringify(options))})}),form.moduleSize.oninput();